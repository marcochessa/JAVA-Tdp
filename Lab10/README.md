## EXERCISE 1

Starting from the basic project relating to the tenth laboratory (Lab10), create an application using JavaFX capable of simulating water flows. Consider the data-set **rivers.sql** [GitHub - DB/rivers.sql] obtained by combining a subset of the information present in the *Time Series Data Library*[^1] (TSDL). This data set contains the flow rate of water flows of some rivers, measured daily for several years. Note that the different rivers were measured in time intervals independent of each other. Note also that river flows are very different from each other, by various orders of magnitude.

The database structure is shown in *Fig 1*.

*Fig 1*

![](Aspose.Words.2856b298-ccf8-4778-8701-9885db7e0f04.003.png)

The 'river' table contains the rivers considered in the data set, each represented by a numerical identifier 'id' and a descriptive string 'name'.

The 'flow' table contains the measurements taken, on the dates specified by the 'day' field and for the river identified by the 'river' field (foreign key). The 'flow' column reports the flow measured on the specified day, expressed in *cubic meters per second*. The primary key 'id' is a simple unique identifier of the measurement.

Purpose of the exercise: Create a JavaFX application that allows you to query the data set and support a designer who has the task of building the dam for the construction of a reservoir that fits into the flow of the river (Fig 2) .

*Fig 2*

![](Aspose.Words.2856b298-ccf8-4778-8701-9885db7e0f04.004.png)

Description from the application: The application must provide the following functionality:

1. Allow the user to select, from a drop-down list, a specific river. As soon as the river is selected, it is necessary to fill in the fields of the interface which show, respectively: the date of the first measurement available for that river, the date of the last measurement available for that river, the total number of measurements, the average flow value measured for this river (called ).
1. Allow the user to simulate the effect of a reservoir of total capacity (expressed in cubic meters). The simulation will have to update, day by day, the quantity of water present in the basin (called ), based on the data on the incoming flow (called ) present in the data set. The calculation must take into account the following rules:
1. The user can specify the value of by entering a “scale factor” > 0, from which we will calculate[^2] = ⋅ ⋅ 30 (in other words, it indicates the fraction of an “average” flow month that the basin can contain before filling).
1. The initial occupation of the basin is ⁄
    1. 2
1. The basin must guarantee an outgoing flow (called ) equal to at least , every day \_

of the year. For simulation purposes, assume = 0.8 ⋅ .

\_

4. When > , the level in the basin will rise by an amount related to the difference between the two flows.
4. It is not possible to have > . In case of excessive inlet flow, this must be discharged at the outlet (an event called "overflow").
4. On each day of the year, there is a 5% probability of having a higher required output flow of 10 ⋅ \_ as the fields need to be irrigated.

The simulator will have to determine, based on:

- the number of days in which the minimum disbursement could not be guaranteed;
- the average occupation of the basin during the simulation.

*Fig 3*

![](Aspose.Words.2856b298-ccf8-4778-8701-9885db7e0f04.005.png)

When creating the code, we start from existing files and classes (FXML, Bean, and DAO); it is obviously allowed to add or modify classes and methods.

All possible data entry or validation errors must be managed, exceptions generated by the program are not permitted.

[^1]: [ https://datamarket.com/data/list/?q=interval:day%20provider:tsdl ](https://datamarket.com/data/list/?q=interval:day%20provider :tsdl), created by Rob Hyndman, Professor of Statistics at Monash University, Australia.
[^2]: Pay attention to the units of measurement, as it is expressed in 3 per second and not per day.
